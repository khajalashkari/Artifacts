<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class 8 Mathematics: Squares and Square Roots Learning Hub</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .main-header {
            text-align: center;
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .main-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            transform: rotate(45deg);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .main-title {
            font-size: 2.5rem;
            color: #4a90e2;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .main-subtitle {
            font-size: 1.2rem;
            color: #666;
            position: relative;
            z-index: 1;
        }

        .chapter-intro-hub, .objectives-hub {
            background: white;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .chapter-intro-hub:hover, .objectives-hub:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .collapsible-trigger {
            width: 100%;
            padding: 20px 25px;
            background: linear-gradient(135deg, #4a90e2, #357abd);
            color: white;
            border: none;
            font-size: 1.3rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .collapsible-trigger:hover {
            background: linear-gradient(135deg, #357abd, #2868a3);
        }

        .toggle-icon {
            transition: transform 0.3s ease;
            font-size: 1.2rem;
        }

        .collapsible-trigger[aria-expanded="true"] .toggle-icon {
            transform: rotate(180deg);
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
        }

        .collapsible-content.expanded {
            max-height: 2000px;
        }

        .content-inner {
            padding: 25px;
        }

        .welcome-section {
            background: linear-gradient(135deg, #ffeaa7, #fab1a0);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .why-matters {
            background: linear-gradient(135deg, #81ecec, #74b9ff);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .learning-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .concept-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border-left: 5px solid #4a90e2;
        }

        .concept-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.15);
        }

        .concept-title {
            font-size: 1.4rem;
            color: #4a90e2;
            margin-bottom: 15px;
        }

        .interactive-demo {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            text-align: center;
        }

        .square-visual {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #ff7675, #fd79a8);
            border-radius: 8px;
            margin: 10px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .square-visual:hover {
            transform: scale(1.1) rotate(5deg);
        }

        .calculator-section {
            background: linear-gradient(135deg, #00b894, #00cec9);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            color: white;
        }

        .calc-input {
            padding: 12px;
            border: none;
            border-radius: 8px;
            margin: 10px;
            font-size: 1.1rem;
            width: 150px;
            text-align: center;
        }

        .calc-button {
            background: #ffffff;
            color: #00b894;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .calc-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .result-display {
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            font-size: 1.3rem;
            text-align: center;
        }

        .progress-bar {
            background: #e9ecef;
            border-radius: 20px;
            height: 8px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4a90e2, #357abd);
            height: 100%;
            border-radius: 20px;
            transition: width 0.5s ease;
        }

        .vocabulary-term {
            display: inline-block;
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            margin: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .vocabulary-term:hover {
            transform: scale(1.05);
        }

        .tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 8px 12px;
            border-radius: 5px;
            font-size: 0.9rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            z-index: 1000;
        }

        .vocabulary-term:hover .tooltip {
            opacity: 1;
        }

        .historical-timeline {
            background: linear-gradient(135deg, #fdcb6e, #e17055);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .timeline-item {
            background: rgba(255,255,255,0.9);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #e17055;
        }

        .game-section {
            background: linear-gradient(135deg, #fd79a8, #fdcb6e);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
        }

        .game-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            max-width: 400px;
            margin: 20px auto;
        }

        .game-tile {
            background: white;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            color: #333;
        }

        .game-tile:hover {
            transform: scale(1.05);
            background: #f8f9fa;
        }

        .game-tile.correct {
            background: #00b894 !important;
            color: white;
        }

        .game-tile.incorrect {
            background: #e17055 !important;
            color: white;
        }

        .real-world-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .example-card {
            background: linear-gradient(135deg, #00b894, #00cec9);
            color: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .example-card:hover {
            transform: translateY(-5px);
        }

        .example-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        @media (max-width: 768px) {
            .main-title {
                font-size: 2rem;
            }
            
            .learning-grid {
                grid-template-columns: 1fr;
            }
            
            .game-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .objective-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #4a90e2;
            transition: all 0.3s ease;
        }

        .objective-item.completed {
            background: #d4edda;
            border-left-color: #28a745;
        }

        .objective-checkbox {
            margin-right: 10px;
            transform: scale(1.2);
        }

        .skill-meter {
            background: #e9ecef;
            border-radius: 15px;
            height: 20px;
            margin: 10px 0;
            overflow: hidden;
            position: relative;
        }

        .skill-fill {
            background: linear-gradient(90deg, #28a745, #20c997);
            height: 100%;
            border-radius: 15px;
            transition: width 1s ease;
            position: relative;
        }

        .skill-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.9rem;
            font-weight: 600;
            color: #333;
        }

        .challenges-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .challenge-card {
            background: linear-gradient(135deg, #ffffff, #f8f9fa);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .challenge-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #4a90e2, #357abd);
        }

        .challenge-card[data-level="Beginner"]::before {
            background: linear-gradient(90deg, #28a745, #20c997);
        }

        .challenge-card[data-level="Intermediate"]::before {
            background: linear-gradient(90deg, #ffc107, #fd7e14);
        }

        .challenge-card[data-level="Advanced"]::before {
            background: linear-gradient(90deg, #fd7e14, #e83e8c);
        }

        .challenge-card[data-level="Expert"]::before {
            background: linear-gradient(90deg, #e83e8c, #6f42c1);
        }

        .challenge-card[data-level="Bonus"]::before {
            background: linear-gradient(90deg, #6f42c1, #495057);
        }

        .challenge-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            border-color: #4a90e2;
        }

        .challenge-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .challenge-card h4 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .challenge-card p {
            color: #666;
            margin-bottom: 15px;
            font-size: 0.95rem;
        }

        .launch-btn {
            background: linear-gradient(135deg, #4a90e2, #357abd);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            font-size: 1rem;
        }

        .launch-btn:hover {
            background: linear-gradient(135deg, #357abd, #2868a3);
            transform: translateY(-2px);
        }

        .challenge-legend {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .challenge-legend h4 {
            margin-bottom: 15px;
            color: #333;
        }

        .level-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            margin: 5px;
            font-size: 0.9rem;
            font-weight: 600;
            color: white;
        }

        .level-badge.beginner {
            background: linear-gradient(135deg, #28a745, #20c997);
        }

        .level-badge.intermediate {
            background: linear-gradient(135deg, #ffc107, #fd7e14);
        }

        .level-badge.advanced {
            background: linear-gradient(135deg, #fd7e14, #e83e8c);
        }

        .level-badge.expert {
            background: linear-gradient(135deg, #e83e8c, #6f42c1);
        }

        .level-badge.bonus {
            background: linear-gradient(135deg, #6f42c1, #495057);
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="main-header">
            <h1 class="main-title">🔢 Squares and Square Roots</h1>
            <p class="main-subtitle">Class 8 Mathematics • Interactive Learning Hub</p>
        </header>

        <section class="chapter-intro-hub">
            <button class="collapsible-trigger" aria-expanded="false" onclick="toggleCollapsible(this)">
                📖 Chapter Introduction & Context
                <span class="toggle-icon">▼</span>
            </button>
            <div class="collapsible-content" aria-hidden="true">
                <div class="content-inner">
                    <div class="welcome-section">
                        <h3>🌟 Welcome to the World of Squares and Square Roots!</h3>
                        <p>Imagine you're designing a video game level, planning a garden, or even determining the perfect screen size for your phone. All of these involve squares and square roots! This chapter will unlock the mathematical power behind these everyday decisions and show you how numbers can literally shape the world around you.</p>
                    </div>

                    <div class="why-matters">
                        <h3>🎯 Why This Matters to You</h3>
                        <div class="real-world-examples">
                            <div class="example-card">
                                <div class="example-icon">📱</div>
                                <h4>Technology</h4>
                                <p>Screen resolutions, pixel densities, and digital image processing all use square calculations</p>
                            </div>
                            <div class="example-card">
                                <div class="example-icon">🏗️</div>
                                <h4>Architecture</h4>
                                <p>Building foundations, room layouts, and structural calculations rely on square measurements</p>
                            </div>
                            <div class="example-card">
                                <div class="example-icon">🎮</div>
                                <h4>Gaming</h4>
                                <p>Game physics, collision detection, and distance calculations use square root formulas</p>
                            </div>
                            <div class="example-card">
                                <div class="example-icon">🎨</div>
                                <h4>Art & Design</h4>
                                <p>Golden ratio, proportional scaling, and geometric patterns involve square relationships</p>
                            </div>
                        </div>
                    </div>

                    <div class="concept-card">
                        <h3 class="concept-title">📋 Chapter Roadmap</h3>
                        <p><strong>Journey Overview:</strong> We'll start with the basics of what squares really mean, explore patterns in perfect squares, master different calculation methods, and finally apply these concepts to solve real-world problems. By the end, you'll think like a mathematician and problem-solver!</p>
                        
                        <div class="interactive-demo">
                            <h4>Quick Visual Preview</h4>
                            <div class="square-visual" onclick="animateSquare(this)">2²</div>
                            <div class="square-visual" onclick="animateSquare(this)">3²</div>
                            <div class="square-visual" onclick="animateSquare(this)">4²</div>
                            <div class="square-visual" onclick="animateSquare(this)">5²</div>
                            <p><small>Click the squares above to see their values!</small></p>
                        </div>
                    </div>

                    <div class="concept-card">
                        <h3 class="concept-title">🔧 Prerequisites Check</h3>
                        <p><strong>What you need to know:</strong></p>
                        <ul>
                            <li>✅ Multiplication tables (especially 1-12)</li>
                            <li>✅ Basic factors and multiples</li>
                            <li>✅ Area of rectangles and squares</li>
                            <li>✅ Simple algebraic expressions</li>
                        </ul>
                        
                        <div class="interactive-demo">
                            <h4>Quick Skills Check</h4>
                            <p>What is 7 × 7?</p>
                            <input type="number" id="prereq-test" placeholder="Your answer">
                            <button class="calc-button" onclick="checkPrereq()">Check</button>
                            <div id="prereq-result"></div>
                        </div>
                    </div>

                    <div class="concept-card">
                        <h3 class="concept-title">📚 Key Vocabulary</h3>
                        <p>Hover over terms to see definitions:</p>
                        <div style="margin-top: 15px;">
                            <span class="vocabulary-term">
                                Perfect Square
                                <div class="tooltip">A number that is the square of an integer (1, 4, 9, 16, 25...)</div>
                            </span>
                            <span class="vocabulary-term">
                                Square Root
                                <div class="tooltip">A number that, when multiplied by itself, gives the original number</div>
                            </span>
                            <span class="vocabulary-term">
                                Radical Sign
                                <div class="tooltip">The symbol √ used to indicate square root</div>
                            </span>
                            <span class="vocabulary-term">
                                Prime Factorization
                                <div class="tooltip">Breaking down a number into its prime number factors</div>
                            </span>
                            <span class="vocabulary-term">
                                Estimation
                                <div class="tooltip">Finding an approximate value when exact calculation is difficult</div>
                            </span>
                        </div>
                    </div>

                    <div class="historical-timeline">
                        <h3>🏛️ Historical Journey</h3>
                        <div class="timeline-item">
                            <strong>Ancient Babylon (2000 BC):</strong> Created the first square root tables for practical calculations
                        </div>
                        <div class="timeline-item">
                            <strong>Pythagoras (500 BC):</strong> Discovered the famous theorem connecting squares in right triangles
                        </div>
                        <div class="timeline-item">
                            <strong>Ancient India (500 AD):</strong> Developed efficient algorithms for calculating square roots
                        </div>
                        <div class="timeline-item">
                            <strong>Modern Day:</strong> Square roots power computer graphics, GPS navigation, and AI algorithms!
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="objectives-hub">
            <button class="collapsible-trigger" aria-expanded="false" onclick="toggleCollapsible(this)">
                🎯 Learning Objectives & Progress Dashboard
                <span class="toggle-icon">▼</span>
            </button>
            <div class="collapsible-content" aria-hidden="true">
                <div class="content-inner">
                    <div class="concept-card">
                        <h3 class="concept-title">🎯 Primary Learning Objectives</h3>
                        
                        <div class="objective-item" id="obj1">
                            <input type="checkbox" class="objective-checkbox" onchange="updateProgress()">
                            <strong>Master Square Concepts:</strong> Understand squares as area models and repeated multiplication (a² = a×a)
                            <div class="skill-meter">
                                <div class="skill-fill" style="width: 0%"></div>
                                <div class="skill-label">Not Started</div>
                            </div>
                        </div>

                        <div class="objective-item" id="obj2">
                            <input type="checkbox" class="objective-checkbox" onchange="updateProgress()">
                            <strong>Recognize Patterns:</strong> Identify perfect square patterns and properties (1, 4, 9, 16, 25...)
                            <div class="skill-meter">
                                <div class="skill-fill" style="width: 0%"></div>
                                <div class="skill-label">Not Started</div>
                            </div>
                        </div>

                        <div class="objective-item" id="obj3">
                            <input type="checkbox" class="objective-checkbox" onchange="updateProgress()">
                            <strong>Calculate Square Roots:</strong> Master multiple methods (factorization, long division, estimation)
                            <div class="skill-meter">
                                <div class="skill-fill" style="width: 0%"></div>
                                <div class="skill-label">Not Started</div>
                            </div>
                        </div>

                        <div class="objective-item" id="obj4">
                            <input type="checkbox" class="objective-checkbox" onchange="updateProgress()">
                            <strong>Develop Estimation Skills:</strong> Approximate non-perfect square roots confidently
                            <div class="skill-meter">
                                <div class="skill-fill" style="width: 0%"></div>
                                <div class="skill-label">Not Started</div>
                            </div>
                        </div>

                        <div class="objective-item" id="obj5">
                            <input type="checkbox" class="objective-checkbox" onchange="updateProgress()">
                            <strong>Real-World Applications:</strong> Solve practical problems using squares and square roots
                            <div class="skill-meter">
                                <div class="skill-fill" style="width: 0%"></div>
                                <div class="skill-label">Not Started</div>
                            </div>
                        </div>
                    </div>

                    <div class="concept-card">
                        <h3 class="concept-title">📊 Overall Chapter Progress</h3>
                        <div class="progress-bar">
                            <div class="progress-fill" id="overall-progress" style="width: 0%"></div>
                        </div>
                        <p id="progress-text">0% Complete - Ready to start your mathematical journey!</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="chapter-intro-hub">
            <button class="collapsible-trigger" aria-expanded="false" onclick="toggleCollapsible(this)">
                🎮 Interactive Challenges Hub
                <span class="toggle-icon">▼</span>
            </button>
            <div class="collapsible-content" aria-hidden="true">
                <div class="content-inner">
                    <p style="text-align: center; margin-bottom: 25px; font-size: 1.1rem;">
                        <strong>17 Interactive Challenges</strong> - Each challenge opens in its own optimized window for focused learning
                    </p>
                    
                    <div class="challenges-grid">
                        <div class="challenge-card" data-level="Beginner">
                            <div class="challenge-icon">📚</div>
                            <h4>Prerequisites Check</h4>
                            <p>Test your basic multiplication skills</p>
                            <button class="launch-btn" onclick="launchChallenge('prerequisites')">Launch Challenge</button>
                        </div>

                        <div class="challenge-card" data-level="Beginner">
                            <div class="challenge-icon">🔷</div>
                            <h4>Visual Square Builder</h4>
                            <p>Build squares and see the pattern</p>
                            <button class="launch-btn" onclick="launchChallenge('squareBuilder')">Launch Challenge</button>
                        </div>

                        <div class="challenge-card" data-level="Beginner">
                            <div class="challenge-icon">🧮</div>
                            <h4>Square Root Calculator</h4>
                            <p>Calculate and estimate square roots</p>
                            <button class="launch-btn" onclick="launchChallenge('calculator')">Launch Challenge</button>
                        </div>

                        <div class="challenge-card" data-level="Intermediate">
                            <div class="challenge-icon">🎯</div>
                            <h4>Perfect Square Hunt</h4>
                            <p>Identify perfect squares in a grid</p>
                            <button class="launch-btn" onclick="launchChallenge('perfectSquareGame')">Launch Challenge</button>
                        </div>

                        <div class="challenge-card" data-level="Intermediate">
                            <div class="challenge-icon">⚡</div>
                            <h4>Speed Square Drill</h4>
                            <p>Quick-fire square calculations</p>
                            <button class="launch-btn" onclick="launchChallenge('speedDrill')">Launch Challenge</button>
                        </div>

                        <div class="challenge-card" data-level="Intermediate">
                            <div class="challenge-icon">🏃</div>
                            <h4>Square Root Race</h4>
                            <p>Timed square root challenges</p>
                            <button class="launch-btn" onclick="launchChallenge('sqrtRace')">Launch Challenge</button>
                        </div>

                        <div class="challenge-card" data-level="Intermediate">
                            <div class="challenge-icon">🔍</div>
                            <h4>Pattern Detective</h4>
                            <p>Discover patterns in square sequences</p>
                            <button class="launch-btn" onclick="launchChallenge('patternDetective')">Launch Challenge</button>
                        </div>

                        <div class="challenge-card" data-level="Advanced">
                            <div class="challenge-icon">🎯</div>
                            <h4>Estimation Championship</h4>
                            <p>Master square root estimation</p>
                            <button class="launch-btn" onclick="launchChallenge('estimation')">Launch Challenge</button>
                        </div>

                        <div class="challenge-card" data-level="Advanced">
                            <div class="challenge-icon">🌍</div>
                            <h4>Real-World Problems</h4>
                            <p>Apply squares to real scenarios</p>
                            <button class="launch-btn" onclick="launchChallenge('realWorld')">Launch Challenge</button>
                        </div>

                        <div class="challenge-card" data-level="Advanced">
                            <div class="challenge-icon">🔄</div>
                            <h4>Square vs Non-Square</h4>
                            <p>Sort numbers by square properties</p>
                            <button class="launch-btn" onclick="launchChallenge('sorting')">Launch Challenge</button>
                        </div>

                        <div class="challenge-card" data-level="Advanced">
                            <div class="challenge-icon">🧩</div>
                            <h4>Missing Number Finder</h4>
                            <p>Complete square sequences</p>
                            <button class="launch-btn" onclick="launchChallenge('missingNumber')">Launch Challenge</button>
                        </div>

                        <div class="challenge-card" data-level="Expert">
                            <div class="challenge-icon">⚖️</div>
                            <h4>Method Comparison</h4>
                            <p>Compare calculation techniques</p>
                            <button class="launch-btn" onclick="launchChallenge('methods')">Launch Challenge</button>
                        </div>

                        <div class="challenge-card" data-level="Expert">
                            <div class="challenge-icon">📐</div>
                            <h4>Area Problem Solver</h4>
                            <p>Geometric applications</p>
                            <button class="launch-btn" onclick="launchChallenge('areaSolver')">Launch Challenge</button>
                        </div>

                        <div class="challenge-card" data-level="Expert">
                            <div class="challenge-icon">🔬</div>
                            <h4>Square Properties Lab</h4>
                            <p>Explore mathematical properties</p>
                            <button class="launch-btn" onclick="launchChallenge('properties')">Launch Challenge</button>
                        </div>

                        <div class="challenge-card" data-level="Expert">
                            <div class="challenge-icon">🎲</div>
                            <h4>Number Theory Quest</h4>
                            <p>Advanced square relationships</p>
                            <button class="launch-btn" onclick="launchChallenge('numberTheory')">Launch Challenge</button>
                        </div>

                        <div class="challenge-card" data-level="Expert">
                            <div class="challenge-icon">🏆</div>
                            <h4>Master Challenge</h4>
                            <p>Ultimate squares and roots test</p>
                            <button class="launch-btn" onclick="launchChallenge('masterChallenge')">Launch Challenge</button>
                        </div>

                        <div class="challenge-card" data-level="Bonus">
                            <div class="challenge-icon">🎨</div>
                            <h4>Square Art Generator</h4>
                            <p>Create art using square patterns</p>
                            <button class="launch-btn" onclick="launchChallenge('artGenerator')">Launch Challenge</button>
                        </div>
                    </div>

                    <div class="challenge-legend">
                        <h4>Difficulty Levels:</h4>
                        <span class="level-badge beginner">Beginner</span>
                        <span class="level-badge intermediate">Intermediate</span>
                        <span class="level-badge advanced">Advanced</span>
                        <span class="level-badge expert">Expert</span>
                        <span class="level-badge bonus">Bonus</span>
                    </div>
                </div>
            </div>
        </section>

        <div class="learning-grid">
            <div class="concept-card">
                <h3 class="concept-title">🔷 Understanding Perfect Squares</h3>
                <p>A perfect square is a number that results from multiplying an integer by itself. Think of it as creating actual squares!</p>
                <p><strong>Perfect Square Sequence:</strong></p>
                <p>1² = 1, 2² = 4, 3² = 9, 4² = 16, 5² = 25, 6² = 36, 7² = 49, 8² = 64, 9² = 81, 10² = 100...</p>
                <button class="calc-button" onclick="launchChallenge('squareBuilder')">Try Visual Builder</button>
            </div>

            <div class="concept-card">
                <h3 class="concept-title">🧮 Square Root Concepts</h3>
                <p>Square roots are the inverse operation of squaring. Finding √n means "what number times itself equals n?"</p>
                <p><strong>Key Methods:</strong></p>
                <ul>
                    <li>Recognition for perfect squares</li>
                    <li>Prime factorization method</li>
                    <li>Estimation for non-perfect squares</li>
                </ul>
                <button class="calc-button" onclick="launchChallenge('calculator')">Try Calculator</button>
            </div>

            <div class="concept-card">
                <h3 class="concept-title">🌍 Real-World Applications</h3>
                <p>Squares and square roots appear everywhere in real life:</p>
                <ul>
                    <li><strong>Architecture:</strong> Room areas and building foundations</li>
                    <li><strong>Technology:</strong> Screen sizes and pixel calculations</li>
                    <li><strong>Sports:</strong> Field dimensions and distance calculations</li>
                    <li><strong>Art:</strong> Proportional scaling and geometric designs</li>
                </ul>
                <button class="calc-button" onclick="launchChallenge('realWorld')">Try Problems</button>
            </div>

            <div class="concept-card">
                <h3 class="concept-title">🎯 Practice Strategies</h3>
                <p>Master squares and square roots through varied practice:</p>
                <ul>
                    <li><strong>Start Simple:</strong> Memorize squares 1² through 15²</li>
                    <li><strong>Build Patterns:</strong> Notice relationships between consecutive squares</li>
                    <li><strong>Practice Estimation:</strong> Use known squares to estimate unknowns</li>
                    <li><strong>Apply Knowledge:</strong> Solve real-world problems</li>
                </ul>
                <button class="calc-button" onclick="launchChallenge('speedDrill')">Start Practice</button>
            </div>
        </div>

        <section class="calculator-section">
            <h3>🧮 Interactive Square Root Calculator</h3>
            <div style="text-align: center;">
                <input type="number" id="sqrt-input" class="calc-input" placeholder="Enter number" min="0">
                <button class="calc-button" onclick="calculateSquareRoot()">Calculate √</button>
                <button class="calc-button" onclick="estimateSquareRoot()">Estimate √</button>
            </div>
            <div class="result-display" id="calc-result">Enter a number to calculate its square root</div>
        </section>

        <section class="game-section">
            <h3>🎮 Perfect Square Hunt Game</h3>
            <p>Click on all the perfect squares! Score: <span id="game-score">0</span></p>
            <div class="game-grid" id="game-grid"></div>
            <button class="calc-button" onclick="startGame()" style="color: #fd79a8;">New Game</button>
        </section>

        <div class="concept-card">
            <h3 class="concept-title">🎯 Estimation Practice</h3>
            <p>Estimate √50 (Hint: 7² = 49, 8² = 64)</p>
            <div style="text-align: center; margin: 15px 0;">
                <input type="number" id="estimate-input" placeholder="Your estimate" step="0.1" style="padding: 10px; border-radius: 5px; border: 2px solid #ddd;">
                <button onclick="checkEstimate()" style="padding: 10px 20px; background: #4a90e2; color: white; border: none; border-radius: 5px; margin-left: 10px;">Check</button>
            </div>
            <div id="estimate-result"></div>
        </div>

        <div class="concept-card">
            <h3 class="concept-title">🌻 Garden Area Calculator</h3>
            <p>If a square garden has an area of X square meters, what's the side length?</p>
            <div style="text-align: center; margin: 15px 0;">
                <input type="number" id="area-input" placeholder="Area (sq meters)" style="padding: 10px; border-radius: 5px; border: 2px solid #ddd;">
                <button onclick="calculateSide()" style="padding: 10px 20px; background: #00b894; color: white; border: none; border-radius: 5px; margin-left: 10px;">Calculate Side</button>
            </div>
            <div id="garden-result"></div>
        </div>

        <div class="concept-card">
            <h3 class="concept-title">🔷 Visual Square Builder</h3>
            <p>Build a visual square to see how area = side × side</p>
            <div style="text-align: center; margin: 15px 0;">
                <input type="number" id="square-input" placeholder="Side length" min="1" max="15" style="padding: 10px; border-radius: 5px; border: 2px solid #ddd;">
                <button onclick="buildSquare()" style="padding: 10px 20px; background: #ff7675; color: white; border: none; border-radius: 5px; margin-left: 10px;">Build Square</button>
            </div>
            <div id="square-output"></div>
        </div>

        <div class="concept-card">
            <h3 class="concept-title">⚖️ Methods Comparison</h3>
            <p>See different methods to find square roots</p>
            <div style="text-align: center; margin: 15px 0;">
                <input type="number" id="method-input" placeholder="Perfect square" style="padding: 10px; border-radius: 5px; border: 2px solid #ddd;">
                <button onclick="showMethods()" style="padding: 10px 20px; background: #6c5ce7; color: white; border: none; border-radius: 5px; margin-left: 10px;">Show Methods</button>
            </div>
            <div id="methods-result"></div>
        </div>
    </div>

    <script>
        // Toggle collapsible sections
        function toggleCollapsible(button) {
            const content = button.nextElementSibling;
            const isExpanded = button.getAttribute('aria-expanded') === 'true';
            
            button.setAttribute('aria-expanded', !isExpanded);
            content.setAttribute('aria-hidden', isExpanded);
            
            if (isExpanded) {
                content.classList.remove('expanded');
            } else {
                content.classList.add('expanded');
            }
        }

        // Animate square visuals
        function animateSquare(element) {
            const value = element.textContent;
            const number = parseInt(value);
            const result = number * number;
            
            element.style.transform = 'scale(1.2) rotate(360deg)';
            element.textContent = result;
            
            setTimeout(() => {
                element.style.transform = 'scale(1) rotate(0deg)';
                element.textContent = value;
            }, 1000);
        }

        // Prerequisites check
        function checkPrereq() {
            const input = document.getElementById('prereq-test');
            const result = document.getElementById('prereq-result');
            const answer = parseInt(input.value);
            
            if (answer === 49) {
                result.innerHTML = '<p style="color: green;">✅ Excellent! You\'re ready to proceed.</p>';
            } else {
                result.innerHTML = '<p style="color: red;">❌ The answer is 49. Review your multiplication tables!</p>';
            }
        }

        // Build visual square
        function buildSquare() {
            const input = document.getElementById('square-input');
            const output = document.getElementById('square-output');
            const num = parseInt(input.value);
            
            if (num && num > 0 && num <= 15) {
                const result = num * num;
                let grid = '<div style="display: inline-block; text-align: center;">';
                grid += '<div style="display: grid; grid-template-columns: repeat(' + num + ', 20px); gap: 2px; margin: 10px;">';
                
                for (let i = 0; i < result; i++) {
                    grid += '<div style="width: 20px; height: 20px; background: #4a90e2; border-radius: 2px;"></div>';
                }
                
                grid += '</div>';
                grid += '<p><strong>' + num + '² = ' + result + '</strong></p>';
                grid += '</div>';
                
                output.innerHTML = grid;
            } else {
                output.innerHTML = '<p style="color: red;">Please enter a number between 1 and 15</p>';
            }
        }

        // Calculate square root
        function calculateSquareRoot() {
            const input = document.getElementById('sqrt-input');
            const result = document.getElementById('calc-result');
            const num = parseFloat(input.value);
            
            if (num >= 0) {
                const sqrt = Math.sqrt(num);
                const isInteger = Number.isInteger(sqrt);
                
                if (isInteger) {
                    result.innerHTML = `√${num} = ${sqrt} (Perfect square!)`;
                } else {
                    result.innerHTML = `√${num} = ${sqrt.toFixed(4)} (Approximate)`;
                }
            } else {
                result.innerHTML = 'Please enter a non-negative number';
            }
        }

        // Estimate square root
        function estimateSquareRoot() {
            const input = document.getElementById('sqrt-input');
            const result = document.getElementById('calc-result');
            const num = parseFloat(input.value);
            
            if (num >= 0) {
                const lower = Math.floor(Math.sqrt(num));
                const upper = lower + 1;
                const lowerSquare = lower * lower;
                const upperSquare = upper * upper;
                
                result.innerHTML = `
                    <strong>Estimation for √${num}:</strong><br>
                    Since ${lower}² = ${lowerSquare} and ${upper}² = ${upperSquare}<br>
                    √${num} is between ${lower} and ${upper}<br>
                    Closer to ${Math.abs(num - lowerSquare) < Math.abs(num - upperSquare) ? lower : upper}
                `;
            }
        }

        // Perfect square game
        let gameScore = 0;
        let gameNumbers = [];

        function startGame() {
            gameScore = 0;
            document.getElementById('game-score').textContent = gameScore;
            
            // Generate mix of perfect squares and other numbers
            gameNumbers = [];
            const perfectSquares = [1, 4, 9, 16, 25, 36, 49, 64, 81, 100];
            const otherNumbers = [2, 3, 5, 6, 7, 8, 10, 11, 12, 13, 14, 15, 17, 18, 19, 20];
            
            // Add 8 perfect squares and 8 other numbers
            for (let i = 0; i < 8; i++) {
                gameNumbers.push(perfectSquares[i]);
                gameNumbers.push(otherNumbers[i]);
            }
            
            // Shuffle array
            for (let i = gameNumbers.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [gameNumbers[i], gameNumbers[j]] = [gameNumbers[j], gameNumbers[i]];
            }
            
            // Create game grid
            const grid = document.getElementById('game-grid');
            grid.innerHTML = '';
            
            gameNumbers.forEach((num, index) => {
                const tile = document.createElement('div');
                tile.className = 'game-tile';
                tile.textContent = num;
                tile.onclick = () => checkGameAnswer(tile, num);
                grid.appendChild(tile);
            });
        }

        function checkGameAnswer(tile, num) {
            const perfectSquares = [1, 4, 9, 16, 25, 36, 49, 64, 81, 100];
            
            if (perfectSquares.includes(num)) {
                tile.classList.add('correct');
                gameScore += 10;
                tile.onclick = null;
            } else {
                tile.classList.add('incorrect');
                gameScore -= 5;
            }
            
            document.getElementById('game-score').textContent = gameScore;
        }

        // Estimation check
        function checkEstimate() {
            const input = document.getElementById('estimate-input');
            const result = document.getElementById('estimate-result');
            const estimate = parseFloat(input.value);
            const actual = Math.sqrt(50);
            
            if (estimate) {
                const difference = Math.abs(estimate - actual);
                
                if (difference < 0.1) {
                    result.innerHTML = '<p style="color: green;">🎯 Excellent estimation!</p>';
                } else if (difference < 0.5) {
                    result.innerHTML = '<p style="color: orange;">👍 Good estimation!</p>';
                } else {
                    result.innerHTML = '<p style="color: red;">📚 Keep practicing! Actual: ' + actual.toFixed(3) + '</p>';
                }
            }
        }

        // Garden calculator
        function calculateSide() {
            const input = document.getElementById('area-input');
            const result = document.getElementById('garden-result');
            const area = parseFloat(input.value);
            
            if (area > 0) {
                const side = Math.sqrt(area);
                result.innerHTML = `
                    <strong>Solution:</strong><br>
                    Area = ${area} square meters<br>
                    Side length = √${area} = ${side.toFixed(2)} meters
                `;
            } else {
                result.innerHTML = 'Please enter a positive area value';
            }
        }

        // Show different methods
        function showMethods() {
            const input = document.getElementById('method-input');
            const result = document.getElementById('methods-result');
            const num = parseInt(input.value);
            
            if (num > 0) {
                const sqrt = Math.sqrt(num);
                
                if (Number.isInteger(sqrt)) {
                    result.innerHTML = `
                        <strong>Finding √${num}:</strong><br>
                        <strong>Method 1 - Recognition:</strong> ${sqrt}² = ${num}<br>
                        <strong>Method 2 - Factorization:</strong> Find prime factors and group them<br>
                        <strong>Method 3 - Estimation:</strong> Use known squares as reference<br>
                        <strong>Answer:</strong> √${num} = ${sqrt}
                    `;
                } else {
                    result.innerHTML = `${num} is not a perfect square. Try numbers like 4, 9, 16, 25, 36, 49, 64, 81, 100, 121, 144, etc.`;
                }
            }
        }

        // Progress tracking
        function updateProgress() {
            const checkboxes = document.querySelectorAll('.objective-checkbox');
            const completed = Array.from(checkboxes).filter(cb => cb.checked).length;
            const total = checkboxes.length;
            const percentage = Math.round((completed / total) * 100);
            
            // Update overall progress
            document.getElementById('overall-progress').style.width = percentage + '%';
            document.getElementById('progress-text').textContent = 
                `${percentage}% Complete - ${completed} of ${total} objectives mastered!`;
            
            // Update individual objective progress
            checkboxes.forEach((checkbox, index) => {
                const objectiveItem = checkbox.closest('.objective-item');
                const skillFill = objectiveItem.querySelector('.skill-fill');
                const skillLabel = objectiveItem.querySelector('.skill-label');
                
                if (checkbox.checked) {
                    objectiveItem.classList.add('completed');
                    skillFill.style.width = '100%';
                    skillLabel.textContent = 'Mastered';
                    skillLabel.style.color = 'white';
                } else {
                    objectiveItem.classList.remove('completed');
                    skillFill.style.width = '0%';
                    skillLabel.textContent = 'Not Started';
                    skillLabel.style.color = '#333';
                }
            });
        }

        // Challenge launcher function
        function launchChallenge(challengeType) {
            const windowFeatures = "width=1000,height=700,scrollbars=yes,resizable=yes,status=no,location=no,toolbar=no,menubar=no";
            
            let challengeContent = '';
            let windowTitle = '';

            switch(challengeType) {
                case 'prerequisites':
                    windowTitle = 'Prerequisites Check';
                    challengeContent = createPrerequisitesChallenge();
                    break;
                case 'squareBuilder':
                    windowTitle = 'Visual Square Builder';
                    challengeContent = createSquareBuilderChallenge();
                    break;
                case 'calculator':
                    windowTitle = 'Square Root Calculator';
                    challengeContent = createCalculatorChallenge();
                    break;
                case 'perfectSquareGame':
                    windowTitle = 'Perfect Square Hunt';
                    challengeContent = createPerfectSquareGameChallenge();
                    break;
                case 'speedDrill':
                    windowTitle = 'Speed Square Drill';
                    challengeContent = createSpeedDrillChallenge();
                    break;
                case 'sqrtRace':
                    windowTitle = 'Square Root Race';
                    challengeContent = createSqrtRaceChallenge();
                    break;
                case 'patternDetective':
                    windowTitle = 'Pattern Detective';
                    challengeContent = createPatternDetectiveChallenge();
                    break;
                case 'estimation':
                    windowTitle = 'Estimation Championship';
                    challengeContent = createEstimationChallenge();
                    break;
                case 'realWorld':
                    windowTitle = 'Real-World Problems';
                    challengeContent = createRealWorldChallenge();
                    break;
                case 'sorting':
                    windowTitle = 'Square vs Non-Square Sorting';
                    challengeContent = createSortingChallenge();
                    break;
                case 'missingNumber':
                    windowTitle = 'Missing Number Finder';
                    challengeContent = createMissingNumberChallenge();
                    break;
                case 'methods':
                    windowTitle = 'Method Comparison';
                    challengeContent = createMethodsChallenge();
                    break;
                case 'areaSolver':
                    windowTitle = 'Area Problem Solver';
                    challengeContent = createAreaSolverChallenge();
                    break;
                case 'properties':
                    windowTitle = 'Square Properties Lab';
                    challengeContent = createPropertiesChallenge();
                    break;
                case 'numberTheory':
                    windowTitle = 'Number Theory Quest';
                    challengeContent = createNumberTheoryChallenge();
                    break;
                case 'masterChallenge':
                    windowTitle = 'Master Challenge';
                    challengeContent = createMasterChallenge();
                    break;
                case 'artGenerator':
                    windowTitle = 'Square Art Generator';
                    challengeContent = createArtGeneratorChallenge();
                    break;
                default:
                    alert('Challenge not available yet!');
                    return;
            }

            const challengeWindow = window.open('', windowTitle, windowFeatures);
            if (challengeWindow) {
                challengeWindow.document.write(challengeContent);
                challengeWindow.document.close();
            }
        }

        // Adding the genericChallenge function
        function createGenericChallenge(title, description, type) {
            return `<!DOCTYPE html>
<html>
<head>
    <title>${title}</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #667eea, #764ba2); margin: 0; padding: 20px; min-height: 100vh; box-sizing: border-box; }
        .container { background: white; border-radius: 20px; padding: 40px; max-width: 600px; margin: 0 auto; text-align: center; }
        .header { margin-bottom: 30px; }
        .content { margin: 40px 0; }
        .close-btn { background: #6c757d; color: white; border: none; padding: 15px 30px; border-radius: 10px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>${title}</h1>
            <p>${description}</p>
        </div>
        <div class="content">
            <div>
                <h2>🚧 Challenge Coming Soon!</h2>
                <p>This advanced challenge is being prepared for you.</p>
                <p>Check back soon for this exciting ${type} challenge!</p>
            </div>
        </div>
        <button class="close-btn" onclick="window.close()">Close Challenge</button>
    </div>
</body>
</html>`;
        }

        // Properly implementing challenge creation functions with correct template literals and NO broken script tags
        function createPrerequisitesChallenge() {
            return `<!DOCTYPE html>
<html>
<head>
    <title>Prerequisites Check</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #667eea, #764ba2); margin: 0; padding: 20px; min-height: 100vh; box-sizing: border-box; }
        .container { background: white; border-radius: 20px; padding: 40px; max-width: 800px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 30px; }
        .question-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .question-card { background: #f8f9fa; border-radius: 15px; padding: 25px; text-align: center; border: 2px solid #e9ecef; }
        .question { font-size: 1.5rem; margin-bottom: 15px; color: #333; }
        .input-field { padding: 12px; font-size: 1.2rem; border: 2px solid #ddd; border-radius: 8px; width: 100px; text-align: center; }
        .check-btn { background: #4a90e2; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; margin-left: 10px; }
        .result { margin-top: 15px; font-weight: bold; }
        .score { text-align: center; font-size: 1.5rem; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📚 Prerequisites Check</h1>
            <p>Test your multiplication skills - foundation for squares!</p>
        </div>
        
        <div class="question-grid">
            <div class="question-card">
                <div class="question">6 × 6 = ?</div>
                <input type="number" class="input-field" id="q1" data-answer="36">
                <button class="check-btn" onclick="checkAnswer('q1')">Check</button>
                <div class="result" id="r1"></div>
            </div>
            
            <div class="question-card">
                <div class="question">8 × 8 = ?</div>
                <input type="number" class="input-field" id="q2" data-answer="64">
                <button class="check-btn" onclick="checkAnswer('q2')">Check</button>
                <div class="result" id="r2"></div>
            </div>
            
            <div class="question-card">
                <div class="question">9 × 9 = ?</div>
                <input type="number" class="input-field" id="q3" data-answer="81">
                <button class="check-btn" onclick="checkAnswer('q3')">Check</button>
                <div class="result" id="r3"></div>
            </div>
            
            <div class="question-card">
                <div class="question">12 × 12 = ?</div>
                <input type="number" class="input-field" id="q4" data-answer="144">
                <button class="check-btn" onclick="checkAnswer('q4')">Check</button>
                <div class="result" id="r4"></div>
            </div>
        </div>
        
        <div class="score" id="score">Score: 0/4 ⭐</div>
        <button class="check-btn" onclick="window.close()" style="margin: 20px auto; display: block; padding: 15px 30px; font-size: 1.1rem;">Close Challenge</button>
    </div>

    <script>
        let score = 0;
        let answered = 0;
        
        function checkAnswer(questionId) {
            const input = document.getElementById(questionId);
            const result = document.getElementById('r' + questionId.slice(1));
            const expected = parseInt(input.dataset.answer);
            const userAnswer = parseInt(input.value);
            
            if (input.disabled) return;
            
            if (userAnswer === expected) {
                result.innerHTML = '✅ Correct!';
                result.style.color = 'green';
                score++;
            } else {
                result.innerHTML = '❌ Wrong! Answer: ' + expected;
                result.style.color = 'red';
            }
            
            input.disabled = true;
            answered++;
            
            document.getElementById('score').textContent = 'Score: ' + score + '/' + answered + ' ⭐';
            
            if (answered === 4) {
                setTimeout(() => {
                    if (score === 4) {
                        alert('🎉 Perfect! You are ready for squares and square roots!');
                    } else if (score >= 2) {
                        alert('👍 Good job! Review multiplication tables for better preparation.');
                    } else {
                        alert('📚 Keep practicing multiplication - it is the foundation of squares!');
                    }
                }, 500);
            }
        }
    </script>
</body>
</html>`;
        }

        function createSquareBuilderChallenge() {
            return `<!DOCTYPE html>
<html>
<head>
    <title>Visual Square Builder</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #667eea, #764ba2); margin: 0; padding: 20px; min-height: 100vh; box-sizing: border-box; }
        .container { background: white; border-radius: 20px; padding: 30px; max-width: 900px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 20px; }
        .controls { text-align: center; margin-bottom: 20px; }
        .input-field { padding: 12px; font-size: 1.2rem; border: 2px solid #ddd; border-radius: 8px; width: 120px; text-align: center; margin: 0 10px; }
        .build-btn { background: #4a90e2; color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-size: 1.1rem; margin: 5px; }
        .square-display { display: flex; align-items: center; justify-content: center; min-height: 300px; overflow: auto; margin: 20px 0; }
        .square-grid { display: inline-block; }
        .cell { width: 25px; height: 25px; background: #4a90e2; margin: 1px; display: inline-block; border-radius: 2px; }
        .info { text-align: center; margin-top: 15px; font-size: 1.2rem; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🔷 Visual Square Builder</h1>
            <p>Build squares and see how area = side × side</p>
        </div>
        
        <div class="controls">
            <input type="number" id="sideLength" class="input-field" placeholder="Side length" min="1" max="20" value="5">
            <button class="build-btn" onclick="buildSquare()">Build Square</button>
            <button class="build-btn" onclick="animateBuilding()">Animate Building</button>
        </div>
        
        <div class="square-display">
            <div id="squareContainer"></div>
        </div>
        
        <div class="info" id="info">Enter a side length and click "Build Square"</div>
        
        <button class="build-btn" onclick="window.close()" style="margin: 20px auto; display: block;">Close Challenge</button>
    </div>

    <script>
        function buildSquare() {
            const sideLength = parseInt(document.getElementById('sideLength').value);
            const container = document.getElementById('squareContainer');
            const info = document.getElementById('info');
            
            if (sideLength < 1 || sideLength > 20) {
                info.textContent = 'Please enter a number between 1 and 20';
                return;
            }
            
            container.innerHTML = '';
            
            const grid = document.createElement('div');
            grid.className = 'square-grid';
            grid.style.display = 'grid';
            grid.style.gridTemplateColumns = 'repeat(' + sideLength + ', 25px)';
            grid.style.gap = '1px';
            
            for (let i = 0; i < sideLength * sideLength; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                grid.appendChild(cell);
            }
            
            container.appendChild(grid);
            
            const area = sideLength * sideLength;
            info.innerHTML = sideLength + ' × ' + sideLength + ' = ' + area + ' square units<br>This square has ' + area + ' unit squares inside it!';
        }
        
        function animateBuilding() {
            const sideLength = parseInt(document.getElementById('sideLength').value);
            const container = document.getElementById('squareContainer');
            const info = document.getElementById('info');
            
            if (sideLength < 1 || sideLength > 15) {
                info.textContent = 'For animation, please use 1-15';
                return;
            }
            
            container.innerHTML = '';
            
            const grid = document.createElement('div');
            grid.className = 'square-grid';
            grid.style.display = 'grid';
            grid.style.gridTemplateColumns = 'repeat(' + sideLength + ', 25px)';
            grid.style.gap = '1px';
            
            container.appendChild(grid);
            
            let count = 0;
            const total = sideLength * sideLength;
            
            const interval = setInterval(() => {
                if (count < total) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.style.opacity = '0';
                    cell.style.transform = 'scale(0)';
                    cell.style.transition = 'all 0.3s ease';
                    grid.appendChild(cell);
                    
                    setTimeout(() => {
                        cell.style.opacity = '1';
                        cell.style.transform = 'scale(1)';
                    }, 50);
                    
                    count++;
                    info.textContent = 'Building... ' + count + ' unit squares added';
                } else {
                    clearInterval(interval);
                    const area = sideLength * sideLength;
                    info.innerHTML = 'Complete! ' + sideLength + ' × ' + sideLength + ' = ' + area + ' square units';
                }
            }, 100);
        }
        
        buildSquare();
    </script>
</body>
</html>`;
        }

        function createCalculatorChallenge() {
            return `<!DOCTYPE html>
<html>
<head>
    <title>Square Root Calculator</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #00b894, #00cec9); margin: 0; padding: 20px; min-height: 100vh; box-sizing: border-box; color: white; }
        .container { background: rgba(255,255,255,0.95); border-radius: 20px; padding: 40px; max-width: 600px; margin: 0 auto; text-align: center; color: #333; }
        .header { margin-bottom: 30px; }
        .input-group { margin-bottom: 30px; }
        .input-field { padding: 12px; font-size: 1.2rem; border: 2px solid #ddd; border-radius: 8px; width: 180px; text-align: center; margin: 0 10px; }
        .calc-btn { background: #00b894; color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-size: 1.1rem; margin: 5px; }
        .result-display { background: #f0f0f0; border-radius: 10px; padding: 20px; font-size: 1.4rem; font-weight: bold; min-height: 80px; display: flex; align-items: center; justify-content: center; word-wrap: break-word; }
        .info { margin-top: 20px; font-size: 0.9rem; color: #666; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🧮 Square Root Calculator</h1>
            <p>Input a number and discover its square root!</p>
        </div>
        
        <div class="input-group">
            <input type="number" id="numberInput" class="input-field" placeholder="Enter a number" step="any">
            <button class="calc-btn" onclick="calculateSqrt()">Calculate √</button>
            <button class="calc-btn" onclick="estimateSqrt()">Estimate √</button>
        </div>
        
        <div class="result-display" id="resultDisplay">Enter a number to calculate its square root.</div>
        
        <div class="info">
            <p>Exact for perfect squares, approximate for others.</p>
        </div>

        <button class="calc-btn" onclick="window.close()" style="margin: 20px auto; display: block; background: #6c757d;">Close Challenge</button>
    </div>

    <script>
        function calculateSqrt() {
            const input = document.getElementById('numberInput');
            const resultDisplay = document.getElementById('resultDisplay');
            const num = parseFloat(input.value);

            if (isNaN(num)) {
                resultDisplay.textContent = 'Please enter a valid number.';
                return;
            }

            if (num < 0) {
                resultDisplay.textContent = 'Cannot calculate square root of a negative number.';
                return;
            }

            const sqrtValue = Math.sqrt(num);
            if (Number.isInteger(sqrtValue)) {
                resultDisplay.textContent = '√' + num + ' = ' + sqrtValue + ' (Perfect Square!)';
            } else {
                resultDisplay.textContent = '√' + num + ' ≈ ' + sqrtValue.toFixed(6) + ' (Approximate)';
            }
        }

        function estimateSqrt() {
            const input = document.getElementById('numberInput');
            const resultDisplay = document.getElementById('resultDisplay');
            const num = parseFloat(input.value);

            if (isNaN(num) || num < 0) {
                resultDisplay.textContent = 'Please enter a non-negative number for estimation.';
                return;
            }

            if (num === 0) {
                resultDisplay.textContent = '√0 = 0';
                return;
            }

            let lowerBound = 0;
            let upperBound = num; // Or a reasonable upper bound like num itself or 100 for small numbers
            
            if (num < 1) { // Handle numbers between 0 and 1
                lowerBound = num;
                upperBound = 1;
            } else {
                lowerBound = Math.floor(Math.sqrt(num));
                upperBound = lowerBound + 1;
                if (lowerBound * lowerBound > num) { // Adjust if num is a perfect square
                    upperBound = lowerBound;
                    lowerBound--;
                }
            }


            resultDisplay.innerHTML = '<strong>Estimation for √' + num + ':</strong><br>';
            if (lowerBound * lowerBound === num) {
                resultDisplay.innerHTML += num + ' is a perfect square! √' + num + ' = ' + lowerBound;
            } else {
                resultDisplay.innerHTML += 'Since ' + lowerBound + '² = ' + (lowerBound * lowerBound) + '<br>';
                resultDisplay.innerHTML += 'And ' + upperBound + '² = ' + (upperBound * upperBound) + '<br>';
                resultDisplay.innerHTML += '√' + num + ' is between ' + lowerBound + ' and ' + upperBound + '.';
                
                const diffLower = Math.abs(num - (lowerBound * lowerBound));
                const diffUpper = Math.abs(num - (upperBound * upperBound));
                if (diffLower < diffUpper) {
                    resultDisplay.innerHTML += '<br>It is closer to ' + lowerBound + '.';
                } else {
                    resultDisplay.innerHTML += '<br>It is closer to ' + upperBound + '.';
                }
            }
        }
    </script>
</body>
</html>`;
        }

        function createPerfectSquareGameChallenge() {
            return `<!DOCTYPE html>
<html>
<head>
    <title>Perfect Square Hunt</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #fd79a8, #fdcb6e); margin: 0; padding: 20px; min-height: 100vh; box-sizing: border-box; color: #333; }
        .container { background: white; border-radius: 20px; padding: 30px; max-width: 700px; margin: 0 auto; text-align: center; }
        .header { margin-bottom: 20px; }
        .game-grid-container { margin: 30px 0; display: flex; justify-content: center; }
        .game-grid { display: grid; grid-template-columns: repeat(5, 80px); grid-template-rows: repeat(4, 80px); gap: 10px; }
        .game-tile { width: 80px; height: 80px; background: #ffeaa7; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.8rem; font-weight: bold; cursor: pointer; transition: all 0.2s ease; border: 2px solid #fab1a0; }
        .game-tile:hover { transform: scale(1.05); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .game-tile.correct { background: #00b894 !important; color: white; transform: scale(1.1); }
        .game-tile.incorrect { background: #e17055 !important; color: white; transform: scale(0.9); }
        .score-display { font-size: 1.5rem; font-weight: bold; margin-bottom: 15px; color: #fd79a8; }
        .timer-display { font-size: 1.2rem; margin-bottom: 20px; color: #fdcb6e; }
        .game-btn { background: #fd79a8; color: white; border: none; padding: 12px 25px; border-radius: 25px; cursor: pointer; font-size: 1.1rem; margin: 5px; }
        .game-btn:hover { background: #e83e8c; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎯 Perfect Square Hunt</h1>
            <p>Click all the perfect squares before time runs out!</p>
        </div>
        
        <div class="score-display">Score: <span id="gameScore">0</span></div>
        <div class="timer-display">Time: <span id="gameTimer">60</span>s</div>
        
        <div class="game-grid-container">
            <div class="game-grid" id="gameGrid"></div>
        </div>
        
        <button class="game-btn" onclick="startGame()">Start New Game</button>
        <button class="game-btn" onclick="window.close()">Close Challenge</button>
    </div>

    <script>
        const perfectSquares = [1, 4, 9, 16, 25, 36, 49, 64, 81, 100, 121, 144, 169, 196, 225];
        const nonSquares = [2, 3, 5, 6, 7, 8, 10, 11, 12, 13, 14, 15, 17, 18, 19, 20, 21, 22, 23, 24, 26, 27, 28, 29, 30];
        
        let score = 0;
        let timer = 60;
        let gameInterval;
        let clickableTiles = 0;

        function generateNumbers() {
            let numbers = [];
            const numPerfectSquares = Math.floor(Math.random() * 5) + 5; // 5-9 perfect squares
            
            let shuffledPerfectSquares = perfectSquares.sort(() => 0.5 - Math.random());
            let shuffledNonSquares = nonSquares.sort(() => 0.5 - Math.random());
            
            for (let i = 0; i < numPerfectSquares; i++) {
                numbers.push(shuffledPerfectSquares[i]);
            }
            for (let i = 0; i < (20 - numPerfectSquares); i++) { // Total 20 tiles
                numbers.push(shuffledNonSquares[i]);
            }
            
            return numbers.sort(() => 0.5 - Math.random());
        }

        function startGame() {
            clearInterval(gameInterval);
            score = 0;
            timer = 60;
            clickableTiles = 0;
            document.getElementById('gameScore').textContent = score;
            document.getElementById('gameTimer').textContent = timer;
            
            const gameGrid = document.getElementById('gameGrid');
            gameGrid.innerHTML = '';
            
            const numbers = generateNumbers();
            
            numbers.forEach(num => {
                const tile = document.createElement('div');
                tile.className = 'game-tile';
                tile.textContent = num;
                tile.onclick = () => checkTile(tile, num);
                gameGrid.appendChild(tile);
                clickableTiles++;
            });

            gameInterval = setInterval(() => {
                timer--;
                document.getElementById('gameTimer').textContent = timer;
                if (timer <= 0 || clickableTiles === 0) {
                    endGame();
                }
            }, 1000);
        }

        function checkTile(tile, num) {
            if (!tile.onclick) return; // Already clicked
            
            if (perfectSquares.includes(num)) {
                tile.classList.add('correct');
                score += 10;
            } else {
                tile.classList.add('incorrect');
                score -= 5;
            }
            document.getElementById('gameScore').textContent = score;
            tile.onclick = null; // Disable further clicks on this tile
            clickableTiles--;
            if (clickableTiles === 0) {
                endGame();
            }
        }

        function endGame() {
            clearInterval(gameInterval);
            document.querySelectorAll('.game-tile').forEach(tile => {
                tile.onclick = null; // Disable all tiles
            });
            alert('Game Over! Your final score is: ' + score);
        }

        // Initialize game on load
        startGame();
    </script>
</body>
</html>`;
        }

        function createSpeedDrillChallenge() {
            return `<!DOCTYPE html>
<html>
<head>
    <title>Speed Square Drill</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #28a745, #20c997); margin: 0; padding: 20px; min-height: 100vh; box-sizing: border-box; color: white; }
        .container { background: rgba(255,255,255,0.95); border-radius: 20px; padding: 40px; max-width: 600px; margin: 0 auto; text-align: center; color: #333; }
        .header { margin-bottom: 30px; }
        .question-area { margin: 30px 0; }
        .question { font-size: 2.5rem; font-weight: bold; margin-bottom: 20px; color: #28a745; }
        .input-field { padding: 15px; font-size: 1.5rem; border: 2px solid #ddd; border-radius: 10px; width: 150px; text-align: center; margin-right: 10px; }
        .submit-btn { background: #28a745; color: white; border: none; padding: 15px 30px; border-radius: 10px; cursor: pointer; font-size: 1.2rem; }
        .feedback { margin-top: 20px; font-size: 1.2rem; font-weight: bold; }
        .score-timer { display: flex; justify-content: space-around; margin-top: 30px; font-size: 1.3rem; }
        .close-btn { background: #6c757d; color: white; border: none; padding: 15px 30px; border-radius: 10px; cursor: pointer; margin-top: 30px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>⚡ Speed Square Drill</h1>
            <p>How fast can you square numbers?</p>
        </div>
        
        <div class="score-timer">
            <div>Score: <span id="score">0</span></div>
            <div>Time: <span id="timer">60</span>s</div>
        </div>

        <div class="question-area">
            <div class="question" id="question"></div>
            <input type="number" id="answerInput" class="input-field" placeholder="Your answer">
            <button class="submit-btn" onclick="checkAnswer()">Submit</button>
            <div class="feedback" id="feedback"></div>
        </div>
        
        <button class="close-btn" onclick="window.close()">Close Challenge</button>
    </div>

    <script>
        let score = 0;
        let timer = 60;
        let currentNumber = 0;
        let gameInterval;
        let timerInterval;

        function generateQuestion() {
            currentNumber = Math.floor(Math.random() * 10) + 2; // Numbers 2-11
            document.getElementById('question').textContent = currentNumber + '² = ?';
            document.getElementById('answerInput').value = '';
            document.getElementById('answerInput').focus();
            document.getElementById('feedback').textContent = '';
        }

        function checkAnswer() {
            const userAnswer = parseInt(document.getElementById('answerInput').value);
            const correctAnswer = currentNumber * currentNumber;
            const feedbackElement = document.getElementById('feedback');

            if (userAnswer === correctAnswer) {
                score++;
                feedbackElement.textContent = '✅ Correct!';
                feedbackElement.style.color = 'green';
            } else {
                feedbackElement.textContent = '❌ Wrong! It was ' + correctAnswer;
                feedbackElement.style.color = 'red';
            }
            document.getElementById('score').textContent = score;
            setTimeout(generateQuestion, 1000); // Next question after 1 second
        }

        function startGame() {
            score = 0;
            timer = 60;
            document.getElementById('score').textContent = score;
            document.getElementById('timer').textContent = timer;
            
            generateQuestion();
            
            clearInterval(gameInterval); // Clear any previous game interval
            clearInterval(timerInterval); // Clear any previous timer interval

            timerInterval = setInterval(() => {
                timer--;
                document.getElementById('timer').textContent = timer;
                if (timer <= 0) {
                    endGame();
                }
            }, 1000);
        }

        function endGame() {
            clearInterval(timerInterval);
            document.getElementById('question').textContent = 'Game Over!';
            document.getElementById('answerInput').disabled = true;
            document.querySelector('.submit-btn').disabled = true;
            document.getElementById('feedback').textContent = 'Final Score: ' + score;
            alert('Time\'s Up! Your final score is: ' + score);
        }

        // Start game on load
        startGame();
    </script>
</body>
</html>`;
        }

        function createSqrtRaceChallenge() {
            return createGenericChallenge("🏃 Square Root Race", "Timed square root challenges", "speed");
        }

        function createPatternDetectiveChallenge() {
            return createGenericChallenge("🔍 Pattern Detective", "Discover patterns in square sequences", "pattern");
        }

        function createEstimationChallenge() {
            return `<!DOCTYPE html>
<html>
<head>
    <title>Estimation Championship</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #fd7e14, #e83e8c); margin: 0; padding: 20px; min-height: 100vh; box-sizing: border-box; color: white; }
        .container { background: rgba(255,255,255,0.95); border-radius: 20px; padding: 40px; max-width: 700px; margin: 0 auto; text-align: center; color: #333; }
        .header { margin-bottom: 30px; }
        .question-area { margin: 30px 0; }
        .question { font-size: 2.2rem; margin-bottom: 20px; color: #fd7e14; }
        .input-field { padding: 15px; font-size: 1.5rem; border: 2px solid #ddd; border-radius: 10px; width: 180px; text-align: center; margin-right: 10px; }
        .submit-btn { background: #fd7e14; color: white; border: none; padding: 15px 30px; border-radius: 10px; cursor: pointer; font-size: 1.2rem; }
        .feedback { margin-top: 20px; font-size: 1.2rem; font-weight: bold; }
        .score-display { font-size: 1.5rem; font-weight: bold; margin-top: 20px; }
        .close-btn { background: #6c757d; color: white; border: none; padding: 15px 30px; border-radius: 10px; cursor: pointer; margin-top: 30px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎯 Estimation Championship</h1>
            <p>How close can you estimate square roots of non-perfect squares?</p>
        </div>
        
        <div class="score-display">Score: <span id="score">0</span></div>

        <div class="question-area">
            <div class="question" id="question"></div>
            <input type="number" id="estimateInput" class="input-field" placeholder="Your estimate (e.g., 7.1)" step="0.01">
            <button class="submit-btn" onclick="checkEstimate()">Submit</button>
            <div class="feedback" id="feedback"></div>
        </div>
        
        <button class="close-btn" onclick="window.close()">Close Challenge</button>
    </div>

    <script>
        const nonPerfectSquares = [2, 3, 5, 6, 7, 8, 10, 11, 12, 13, 14, 15, 17, 18, 19, 20, 21, 22, 23, 24, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80];
        let score = 0;
        let currentNumber = 0;
        let questionCount = 0;
        const totalQuestions = 5;

        function generateQuestion() {
            if (questionCount >= totalQuestions) {
                endGame();
                return;
            }
            
            const randomIndex = Math.floor(Math.random() * nonPerfectSquares.length);
            currentNumber = nonPerfectSquares[randomIndex];
            document.getElementById('question').textContent = 'Estimate √' + currentNumber + ' (to 2 decimal places):';
            document.getElementById('estimateInput').value = '';
            document.getElementById('estimateInput').focus();
            document.getElementById('feedback').textContent = '';
            questionCount++;
        }

        function checkEstimate() {
            const userAnswer = parseFloat(document.getElementById('estimateInput').value);
            const actualAnswer = Math.sqrt(currentNumber);
            const feedbackElement = document.getElementById('feedback');

            if (isNaN(userAnswer)) {
                feedbackElement.textContent = 'Please enter a valid number.';
                feedbackElement.style.color = 'red';
                return;
            }

            const difference = Math.abs(userAnswer - actualAnswer);
            let points = 0;

            if (difference <= 0.05) {
                points = 10;
                feedbackElement.textContent = '🎯 Excellent! (+10 pts) Actual: ' + actualAnswer.toFixed(2);
                feedbackElement.style.color = 'green';
            } else if (difference <= 0.1) {
                points = 5;
                feedbackElement.textContent = '👍 Very Good! (+5 pts) Actual: ' + actualAnswer.toFixed(2);
                feedbackElement.style.color = 'orange';
            } else if (difference <= 0.2) {
                points = 2;
                feedbackElement.textContent = '👌 Good attempt! (+2 pts) Actual: ' + actualAnswer.toFixed(2);
                feedbackElement.style.color = 'goldenrod';
            } else {
                points = 0;
                feedbackElement.textContent = '❌ Keep practicing! Actual: ' + actualAnswer.toFixed(2);
                feedbackElement.style.color = 'red';
            }
            
            score += points;
            document.getElementById('score').textContent = score;
            
            setTimeout(generateQuestion, 2000); // Next question after 2 seconds
        }

        function endGame() {
            document.getElementById('question').textContent = 'Challenge Complete!';
            document.getElementById('estimateInput').disabled = true;
            document.querySelector('.submit-btn').disabled = true;
            document.getElementById('feedback').textContent = 'Final Score: ' + score + ' out of ' + (totalQuestions * 10) + ' points!';
            alert('Estimation Championship Over! Your final score is: ' + score + ' points.');
        }

        // Start game on load
        generateQuestion();
    </script>
</body>
</html>`;
        }

        function createRealWorldChallenge() {
            return createGenericChallenge("🌍 Real-World Problems", "Apply squares to real scenarios", "application");
        }

        function createSortingChallenge() {
            return createGenericChallenge("🔄 Square vs Non-Square Sorting", "Sort numbers by their square properties", "sorting");
        }

        function createMissingNumberChallenge() {
            return createGenericChallenge("🧩 Missing Number Finder", "Complete the square sequences", "sequence");
        }

        function createMethodsChallenge() {
            return createGenericChallenge("⚖️ Method Comparison", "Compare different square root calculation methods", "comparison");
        }

        function createAreaSolverChallenge() {
            return createGenericChallenge("📐 Area Problem Solver", "Solve geometric problems involving squares and areas", "geometry");
        }

        function createPropertiesChallenge() {
            return createGenericChallenge("🔬 Square Properties Lab", "Explore mathematical properties of squares", "properties");
        }

        function createNumberTheoryChallenge() {
            return createGenericChallenge("🎲 Number Theory Quest", "Explore advanced relationships in number theory related to squares", "number theory");
        }

        function createMasterChallenge() {
            return createGenericChallenge("🏆 Master Challenge", "An ultimate test of all your squares and square roots skills", "mastery");
        }

        function createArtGeneratorChallenge() {
            return createGenericChallenge("🎨 Square Art Generator", "Create visual art using square patterns and transformations", "creative");
        }


        // Initialize game on page load (for the Perfect Square Hunt in main page)
        document.addEventListener('DOMContentLoaded', function() {
            // Only start the game if the element exists, to avoid errors in challenges that don't have it
            if (document.getElementById('gameGrid')) {
                startGame();
            }
            updateProgress(); // Initialize progress display
        });
    </script>
</body>
</html>
